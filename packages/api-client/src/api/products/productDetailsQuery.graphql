#import "../../fragments/productFragment.graphql"
#import "../../fragments/configurableProductOptionsFragment.graphql"
#import "../../fragments/productImageFragment.graphql"
#import "../../fragments/productPriceRangeFragment.graphql"
#import "../../fragments/productPriceTierFragment.graphql"

query productDetails($search: String = "", $filter: ProductAttributeFilterInput, $pageSize: Int = 20, $currentPage: Int = 1, $sort: ProductAttributeSortInput) {
  products(search: $search, filter: $filter, pageSize: $pageSize, currentPage: $currentPage, sort: $sort) {
    items {
      ...ProductFragment
      ...ProductPriceRange
      ...ProductPriceTier
      ...ProductImages
      ...ProductUrlFragment
      stock_status
      only_x_left_in_stock
      material
      meta_description
      meta_keyword
      meta_title
      new
      options_container
      description {
        html
      }
      short_description {
        html
      }
      upsell_products {
        ...ProductFragment
      }
      related_products {
        ...ProductFragment
      }

      ... on ConfigurableProduct {
        variants {
          attributes {
            code
            value_index
            label
            uid
          }
          product {
            ...ProductFragment
            media_gallery {
              url
            }
          }
        }
        ...ConfigurableProductOptionsFragment
      }
    }
  }
}
